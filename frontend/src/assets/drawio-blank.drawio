<mxfile host="app.diagrams.net" modified="2026-01-28T00:00:00.000Z" agent="GPT" version="22.1.0">
  <diagram id="common-arch" name="Common System Architecture">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="t1" value="常用业务系统架构（通用模板）" style="text;html=1;align=center;verticalAlign=middle;fontSize=22;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="20" width="760" height="40" as="geometry"/>
        </mxCell>

        <!-- Client Layer -->
        <mxCell id="c_bg" value="客户端层" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#B3B3B3;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="1480" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="c1" value="Web（H5 / PC）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="100" y="125" width="220" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="c2" value="Mobile App" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="340" y="125" width="220" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="c3" value="小程序 / 公众号" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="580" y="125" width="220" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="c4" value="第三方系统 / 合作方" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="820" y="125" width="260" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="c5" value="运营后台 / 管理台" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1100" y="125" width="240" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="c6" value="开放API调用者" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1360" y="125" width="160" height="50" as="geometry"/>
        </mxCell>

        <!-- Access Layer -->
        <mxCell id="a_bg" value="接入层（边缘/网关）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#B3B3B3;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="220" width="1480" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="a1" value="CDN / WAF" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="200" y="265" width="220" height="55" as="geometry"/>
        </mxCell>
        <mxCell id="a2" value="API Gateway&#10;（路由/鉴权/限流/灰度）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="460" y="255" width="300" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="a3" value="LB / Ingress" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="800" y="265" width="220" height="55" as="geometry"/>
        </mxCell>
        <mxCell id="a4" value="Auth&#10;（SSO/OAuth2/JWT）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1060" y="255" width="260" height="75" as="geometry"/>
        </mxCell>

        <!-- Service Layer -->
        <mxCell id="s_bg" value="业务服务层（微服务/模块）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#B3B3B3;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="380" width="1480" height="210" as="geometry"/>
        </mxCell>

        <mxCell id="s1" value="用户/账号服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="160" y="435" width="220" height="55" as="geometry"/>
        </mxCell>
        <mxCell id="s2" value="订单/交易服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="400" y="435" width="220" height="55" as="geometry"/>
        </mxCell>
        <mxCell id="s3" value="内容/消息服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="640" y="435" width="220" height="55" as="geometry"/>
        </mxCell>
        <mxCell id="s4" value="计费/对账服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="880" y="435" width="220" height="55" as="geometry"/>
        </mxCell>
        <mxCell id="s5" value="报表/分析服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1120" y="435" width="220" height="55" as="geometry"/>
        </mxCell>

        <mxCell id="s6" value="BFF（可选）&#10;Web-BFF / App-BFF" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="520" y="505" width="320" height="65" as="geometry"/>
        </mxCell>

        <!-- Data & Middleware Layer -->
        <mxCell id="d_bg" value="数据与中间件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#B3B3B3;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="610" width="1480" height="170" as="geometry"/>
        </mxCell>

        <mxCell id="d1" value="RDBMS&#10;MySQL / PostgreSQL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="140" y="660" width="240" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="d2" value="Cache&#10;Redis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="400" y="660" width="170" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="d3" value="Message Queue&#10;Kafka / RabbitMQ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="590" y="660" width="250" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="d4" value="Search&#10;Elasticsearch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="860" y="660" width="200" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="d5" value="Object Storage&#10;S3 / OSS / MinIO" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1080" y="660" width="240" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="d6" value="Data Warehouse（可选）&#10;ClickHouse / BigQuery" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1340" y="660" width="180" height="70" as="geometry"/>
        </mxCell>

        <!-- Observability & Ops -->
        <mxCell id="o_bg" value="可观测性 &amp; 运维" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#B3B3B3;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="800" width="1480" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="o1" value="Logging&#10;ELK / Loki" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="220" y="825" width="200" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="o2" value="Metrics&#10;Prometheus" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="440" y="825" width="200" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="o3" value="Tracing&#10;Jaeger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="660" y="825" width="200" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="o4" value="Alerting&#10;Alertmanager" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="880" y="825" width="220" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="o5" value="CI/CD&#10;GitHub Actions / Jenkins" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1120" y="825" width="280" height="50" as="geometry"/>
        </mxCell>

        <!-- Edges: clients -> CDN/WAF -> Gateway -> LB/Ingress -> services -->
        <mxCell id="e1" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="c1" target="a1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e2" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="c2" target="a1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e3" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="c3" target="a1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e4" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="c4" target="a2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e5" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="c5" target="a2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e6" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="c6" target="a2"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="e7" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="a1" target="a2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e8" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="a2" target="a3"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="e9" value="校验/签发Token" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="a2" target="a4"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="e10" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="a3" target="s6"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e11" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s6" target="s1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e12" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s6" target="s2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e13" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s6" target="s3"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e14" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s6" target="s4"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e15" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s6" target="s5"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Services -> Data/Middleware -->
        <mxCell id="e16" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s1" target="d1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e17" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s2" target="d1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e18" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s2" target="d3"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e19" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s3" target="d3"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e20" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s3" target="d5"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e21" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s4" target="d1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e22" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s5" target="d6"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e23" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s1" target="d2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e24" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s2" target="d2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e25" style="endArrow=block;html=1;rounded=0;strokeColor=#666666;" edge="1" parent="1" source="s5" target="d4"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Observability taps -->
        <mxCell id="e26" value="Logs" style="dashed=1;endArrow=block;html=1;strokeColor=#666666;" edge="1" parent="1" source="s_bg" target="o1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e27" value="Metrics" style="dashed=1;endArrow=block;html=1;strokeColor=#666666;" edge="1" parent="1" source="s_bg" target="o2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="e28" value="Traces" style="dashed=1;endArrow=block;html=1;strokeColor=#666666;" edge="1" parent="1" source="s_bg" target="o3"><mxGeometry relative="1" as="geometry"/></mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
